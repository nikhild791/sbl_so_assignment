FROM node:20-alpine

WORKDIR /app

COPY ./packages ./packages
COPY ./package.json ./package.json
COPY ./package-lock.json ./package-lock.json
COPY ./turbo.json ./turbo.json 

RUN npm install
COPY ./apps/api ./apps/api

RUN npm run build
RUN npm run db:generate
EXPOSE 3001
CMD ["npm", "run","start:api"]
